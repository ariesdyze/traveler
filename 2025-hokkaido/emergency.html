<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>緊急聯絡資訊 | 北海道之旅</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script>
        // 驗證登入狀態
        function checkAuth() {
            const token = localStorage.getItem('travel_auth');
            
            if (!token) {
                // 沒有token，重定向到登入頁
                window.location.href = '../index.html';
                return;
            }
            
            try {
                // 解析token
                const tokenData = JSON.parse(atob(token));
                
                // 檢查token是否有效
                if (!tokenData.validated || tokenData.destination !== '2025-hokkaido') {
                    // token無效或不是給這個目的地的，重定向到登入頁
                    localStorage.removeItem('travel_auth'); // 清除無效token
                    window.location.href = '../index.html';
                }
                
                // 檢查token是否過期（可選，這裡設定為30天）
                const now = new Date().getTime();
                const tokenAge = now - tokenData.timestamp;
                const maxAge = 30 * 24 * 60 * 60 * 1000; // 30天
                
                if (tokenAge > maxAge) {
                    // token已過期，重定向到登入頁
                    localStorage.removeItem('travel_auth');
                    window.location.href = '../index.html';
                }
            } catch (e) {
                // token解析錯誤，重定向到登入頁
                localStorage.removeItem('travel_auth');
                window.location.href = '../index.html';
            }
        }
        
        // 頁面載入時立即檢查登入狀態
        checkAuth();
    </script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <!-- 頂部導航欄 -->
    <header class="bg-teal-600 text-white p-4 relative">
        <div class="flex items-center gap-3">
            <a href="index.html" class="text-white">
                <i class="fas fa-arrow-left text-xl"></i>
            </a>
            <h1 class="text-xl font-bold">緊急聯絡資訊</h1>
        </div>
    </header>

    <!-- 聯絡資訊卡片區 -->
    <div class="p-4 space-y-4">

        <div class="bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow">
            <div class="bg-teal-800 text-white p-3">
                <h2 class="font-bold text-lg">Visit Japan Web</h2>
            </div>
            <div class="p-4 space-y-3">
                <p><i class="fas fa-file text-teal-600 mr-2"></i> 線上入境資料填寫</p>
                <p></p><a href="https://services.digital.go.jp/zh-cmn-hant/visit-japan-web/" target="_blank" class="text-teal-600 hover:text-teal-800 transition-colors">
                    <i class="fas fa-link text-teal-600 mr-2"></i>官方網站
                </a></p>
            </div>
        </div>

        <!-- 台灣駐日本代表處卡片 -->
        <div class="bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow">
            <div class="bg-teal-700 text-white p-3">
                <h2 class="font-bold text-lg">台北駐日經濟文化代表處 札幌分處</h2>
            </div>
            <div class="p-4 space-y-3">
                <p><i class="fas fa-map-marker-alt text-teal-600 mr-2"></i> 地址：北海道札幌市中央區北4條西4丁目1番地 伊藤大樓5樓</p>
                <p><i class="fas fa-phone-alt text-teal-600 mr-2"></i> 電話：+81-11-222-2930</p>
                <p><i class="fas fa-clock text-teal-600 mr-2"></i> 服務時間：週一~週五 09:00~12:00 13:00~18:00</p>
                <p></p><a href="https://www.roc-taiwan.org/jpokd/index.html" target="_blank" class="text-teal-600 hover:text-teal-800 transition-colors">
                    <i class="fas fa-link text-teal-600 mr-2"></i>官方網站
                </a></p>
            </div>
        </div>

        <!-- 旅遊保險資訊卡片 -->
        <div class="bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow">
            <div class="bg-teal-500 text-white p-3">
                <h2 class="font-bold text-lg">旅遊保險資訊1</h2>
            </div>
            <div class="p-4 space-y-3">
                <p><i class="fas fa-building text-teal-600 mr-2"></i> 保險公司：JNTO</p>
                <p></p><a href="https://www.jnto.go.jp/emergency/chc/do_travel_insurance04.html" target="_blank" class="text-teal-600 hover:text-teal-800 transition-colors">
                    <i class="fas fa-link text-teal-600 mr-2"></i>官方網站
                </a></p>
                
                <hr class="my-3">
                
                <div>
                    <h3 class="font-bold mb-2">特別注意：</h3>
                    <ul class="list-disc list-inside text-sm pl-2 space-y-1">
                        <li>入境後才能投保</li>
                        <li>附贈「口譯服務」「醫療機構介紹和安排服務」</li>
                        <li>中文會是中國人</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 旅遊保險資訊卡片 -->
        <div class="bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow">
            <div class="bg-teal-400 text-white p-3">
                <h2 class="font-bold text-lg">旅遊保險資訊2</h2>
            </div>
            <div class="p-4 space-y-3">
                <p><i class="fas fa-building text-teal-600 mr-2"></i> 保險公司：東京海上日動</p>
                <p></p><a href="https://tokiomarinenichido.jp/zh-hant/china2/" target="_blank" class="text-teal-600 hover:text-teal-800 transition-colors">
                    <i class="fas fa-link text-teal-600 mr-2"></i>官方網站
                </a></p>
                
                <hr class="my-3">
                
                <div>
                    <h3 class="font-bold mb-2">特別注意：</h3>
                    <ul class="list-disc list-inside text-sm pl-2 space-y-1">
                        <li>入境日本後申請、今天申請的情況下，將明天設為保險開始日</li>
                        <li>附贈「口譯服務」「醫療機構介紹和安排服務」</li>
                        <li>(應該)中文會是中國人</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 清除資料按鈕 -->
    <div class="p-4 flex justify-center">
        <button id="clearStorageBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg shadow transition-colors">
            <i class="fas fa-cloud mr-2"></i>清除本機端天氣資料
        </button>
    </div>

    <script>
        // 清除天氣相關 localStorage 按鈕功能
        document.getElementById('clearStorageBtn').addEventListener('click', function() {
            // 找出所有與天氣相關的localStorage項目並清除
            const keysToRemove = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && (key.includes('weather') || key.includes('天氣') || key.includes('forecast'))) {
                    keysToRemove.push(key);
                }
            }
            
            // 刪除找到的天氣相關鍵值
            keysToRemove.forEach(key => localStorage.removeItem(key));
            
            // 返回前一頁
            window.history.back();
        });
    </script>
</body>
</html>

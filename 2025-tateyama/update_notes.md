# 立山黑部行程更新手冊

## 格式規範

### 1. 日期鍵值格式
- 主鍵值命名格式：「地點 日期」或「日期 星期」
- 例如：「上高地 4/17」或「4/16 三」
- date 字段使用簡化格式：「4/17」或「4/16」
- 對於特定地點的行程（非日期為主），直接使用地點名稱作為主鍵，如「黑部」、「松本」

### 2. 連結格式
- 如果連結已經在 `links` 陣列中定義，就不要在 `details` 中重複出現 `>>連結顯示名稱|連結url` 的格式
- 所有連結應該放在 `links` 陣列中，格式為：
```json
"links": [
    {"title": "連結顯示名稱", "url": "連結網址"}
]
```

### 3. 標題格式
- 標題格式建議：「類型｜名稱」
- 主要類型：
  - 入境/出境：「入境｜機場名稱」
  - 交通：「轉車｜起點 [交通方式] > 終點」
  - 住宿：「入住｜飯店名稱」或「退房｜飯店名稱」
  - 景點：「景點｜景點名稱」或「△景點名稱」（△表示主要景點）
  - 用餐：「早餐/午餐/晚餐｜餐廳名稱」
  - 購票：「購票｜@地點」

### 4. 換行處理
- HTML 中的換行使用 `<br>` 而不是 `\n`
- 多行內容之間使用 `<br>` 分隔
- 在 details 字段中使用 `<br>` 確保在 HTML 顯示時正確換行

### 5. 時間格式
- 若有開始和結束時間：`"time": "開始時間-結束時間"`（例：`"time": "09:30-12:30"`）
- 若只有單一時間：`"time": "開始時間"`（例：`"time": "08:00"`）
- 若無特定時間：`"time": ""`
- 交通時刻表使用 24 小時制：例如「松本 05:56 - 07:01 信濃大町」

## 資料對應關係

| Notion欄位       | HTML欄位            | 說明                                |
|-----------------|---------------------|-------------------------------------|
| 標題             | title              | 直接使用標題欄位的內容                 |
| 開始時間+結束時間   | time              | 如果有兩個時間，以"-"連接；否則留空      |
| 說明             | details           | 處理特殊標記如">>連結標題\|URL"為HTML或links陣列 |
| 地圖連結          | mapUrl            | 直接使用地圖連結欄位                   |
| 營業時間          | businessHours     | 直接使用營業時間欄位                   |
| 門票             | ticket            | 直接使用門票欄位                       |
| 下一個交通方式      | nextTransportation | 直接使用下一個交通方式欄位              |
| 對應標題          | (用於組織數據)      | 用於確定項目歸屬哪個日期鍵值             |

## ID 命名規則
- 使用英文小寫
- 以短橫線分隔單詞
- 通常反映項目內容
- 命名模式：
  - 景點：`地點名稱`（例：`matsumoto-castle`）
  - 景點路線：`起點-to-終點`（例：`kappa-to-myojin`）
  - 交通：`起點-to-終點`（例：`tokyo-to-shinjuku`）或`起點-終點`（例：`shinano-omachi-ogizawa`）
  - 飯店：`hotel-名稱`（例：`hotel-buena-vista`）或直接使用飯店名稱（例：`alpico-plaza-hotel`）
  - 其他活動：`活動名稱`（例：`buy-ticket`、`check-out`、`get-luggage`）

## 特殊處理

### 1. 交通資訊格式
- 在 `nextTransportation` 中包含詳細的交通資訊
- 格式範例：
  - 步行：`"步行 · 10分鐘"`或`"步行 · 約15分鐘"`
  - JR線：`"JR · 特急あずさ37号 · 松本18:03 - 新宿20:11"`或`"JR · [発]3番線<br>松本 05:56 - 07:01 信濃大町"`
  - 巴士：`"巴士 · ￥1,500"`或`"巴士 · 40分<br>信濃大町 07:05 - 07:45 扇沢"`
  - 電車+巴士時刻表：
    ```
    "上高地 11:25 - 11:53 新島島 12:48 - 13:17 松本
    上高地 12:05 - 12:33 新島島 13:27 - 13:56 松本"
    ```
  - 特急列車：`"特急あずさ號 · 約2小時30分"`
  - 複雜轉乘：`"新宿 · JR · 特急あずさ37号 · [発]10番線"`

### 2. 票價資訊格式
- 在 `ticket` 字段中記錄票價資訊
- 格式範例：
  - 單程票價：`"ticket": "￥700"`
  - 往返票價：`"ticket": "往復 2,950 日元"`或`"ticket": "室堂まで 往復 12,300円"`

### 3. 營業時間格式
- 在 `businessHours` 字段中記錄營業時間
- 格式範例：`"businessHours": "08:30-17:00"`或`"businessHours": "24小時"`

### 4. 上高地特殊連結處理
- 地圖連結格式：`">>上高地地圖|https://www.kamikochi.or.jp/learn/parkmap/"`
- 巴士預訂連結：`">>回程巴士車票預訂|https://japanbusonline.com/zh-tw/CourseSearch/11600270201"`
- 將特殊連結轉換為 links 陣列：
  ```json
  "links": [
    {"title": "上高地地圖", "url": "https://www.kamikochi.or.jp/learn/parkmap/"},
    {"title": "回程巴士車票預訂", "url": "https://japanbusonline.com/zh-tw/CourseSearch/11600270201"}
  ]
  ```

### 5. 住宿資訊格式
```html
"details": "酒店位置便利，毗鄰松本城和松本美術館，距離松本站徒步約10分鐘。<br>酒店提供免費的洗漱用品和WiFi服務。"
```

### 6. 景點詳細資訊
- 在 details 中提供景點的歷史背景、特色或重要資訊
- 範例：`"details": "松本城是日本國寶級城堡，黑色外觀而被稱為「烏城」，是日本現存最古老的五層六階天守閣之一。"`

## 典型項目範例

### 交通項目
```json
{
  "id": "matsumoto-to-kamikochi",
  "time": "05:20-07:05",
  "title": "轉車｜松本 [巴士] > 上高地（かみこうち）",
  "details": "松本巴士總站搭乘前往上高地的直達巴士，車程約1小時45分鐘，途中會經過風景優美的山區。提前預訂座位以確保有位。",
  "mapUrl": "https://maps.app.goo.gl/7Gzctrb6P6NXGhhP8",
  "nextTransportation": "步行 · 5分鐘",
  "links": [
    {"title": "巴士預訂", "url": "https://japanbusonline.com/zh-tw/CourseSearch/11600270001"}
  ]
}
```

### 景點項目
```json
{
  "id": "matsumoto-castle",
  "time": "09:00-11:00",
  "title": "景點｜松本城",
  "details": "松本城是日本國寶級城堡，黑色外觀而被稱為「烏城」，是日本現存最古老的五層六階天守閣之一。",
  "mapUrl": "https://maps.app.goo.gl/cKZP5Q97gkZiS1JH6",
  "nextTransportation": "步行 · 約15分鐘",
  "links": [],
  "ticket": "￥700",
  "businessHours": "08:30-17:00"
}
```

### 住宿項目
```json
{
  "id": "alpico-plaza-hotel",
  "time": "",
  "title": "入住｜Alpico Plaza Hotel (アルピコプラザホテル)",
  "details": "免費的來回接駁巴士1日共有2班次，十分方便。請向櫃台人員索取泡湯券。<br>※此項服務有人數限制，請您特別注意。詳細規定請向飯店洽詢。<br>※溫泉設施在清潔維護時段會暫停對外開放，請事先向櫃台確認。<br>• 阿爾匹克廣場酒店→翔峰（去程）18:40、19:40<br>• 翔峰→阿爾匹克廣場酒店（回程）20:00、21:00",
  "mapUrl": "https://maps.app.goo.gl/YDpecAG8VKbEAEeS6"
}
```

### 購票項目
```json
{
  "id": "buy-ticket",
  "time": "",
  "title": "購票｜@扇沢",
  "details": "",
  "nextTransportation": "扇沢（おぎざわ） 09:00 - 10:25 室堂（むろど）<br>扇沢（おぎざわ） 09:30 - 10:55 室堂（むろど）",
  "ticket": "室堂まで 往復 12,300円",
  "links": [
    {"title": "阿爾卑資山脈路線票價", "url": "https://www.alpen-route.com/tw/transport/fare.html"}
  ]
}
```

## 日期和天氣資訊

### 1. 日期天氣結構
每個日期鍵值應包含完整的天氣資訊：
```json
"4/18": {
  "date": "4/18",
  "weather": {
    "condition": "多雲",
    "temperature": "12°C - 18°C",
    "rainProb": "15%"
  },
  "items": [
    // 行程項目
  ]
}
```

### 2. 非日期鍵值的地點資訊
特定地點的行程也應包含天氣資訊：
```json
"松本": {
  "weather": {
    "condition": "晴朗",
    "temperature": "14°C - 22°C",
    "rainProb": "10%"
  },
  "items": [
    // 行程項目
  ]
}
```

## 注意事項

1. 請確保每個日期的天氣資訊正確：
```json
"weather": {
  "condition": "天氣狀況",
  "temperature": "溫度範圍",
  "rainProb": "降雨機率"
}
```

2. 請保持項目時間順序的一致性，按照發生順序排列

3. 松本和上高地行程應區分開來，松本相關的景點放在「松本」鍵下

4. 對於上高地特有的巴士和電車轉乘資訊，請特別注意時刻表的格式和準確性

5. 每個行程項目應該有合適的ID命名，特別是多個相似項目時需明確區分

6. 特殊景點標記使用「△」符號，如「△室堂（むろど）& 雪壁 & 午餐」，用於標示主要景點

7. 複雜的交通轉乘資訊應在 nextTransportation 欄位中詳細說明，使用 <br> 分隔多行信息

8. 如果有多種交通時間選項，應列出所有可能的時間，以便使用者選擇最適合的時間

9. 購票信息應包含價格、購買地點和可能的預訂連結 